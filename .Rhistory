"Green alert",
"Yellow alert",
"Orange alert",
"Red alert",
"Extreme heavy rainfall"
),
values = c('White', 'Green', 'Yellow', 'Orange', 'Red', '#8B0000')
) +
labs(title = "Kerala weather warning",
subtitle = glue("Date: {col2}-{year(now())}"),
caption = "Source: IMD, Created by: Open-oven") +
theme_map()
girafe( ggobj = g1)
#theme-map
theme_map <- function(...) {
theme_minimal() +
theme(
text = element_text(family = "Ubuntu Regular", color = "#22211d"),
axis.line = element_blank(),
axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
axis.title.x = element_blank(),
axis.title.y = element_blank(),
# panel.grid.minor = element_line(color = "#ebebe5", size = 0.2),
panel.grid.major = element_line(color = "#ebebe5", size = 0.2),
panel.grid.minor = element_blank(),
plot.background = element_rect(fill = "blue", color = NA),
panel.background = element_rect(fill = "#f5f5f2", color = NA),
legend.background = element_rect(fill = "#f5f5f2", color = NA),
panel.border = element_blank(),
...
)
}
g1 <- ggplot(map_latest) +
geom_sf(aes(fill = !!col2)) +
geom_sf_interactive(aes(fill = !!col2,tooltip = Name_1))+
scale_fill_manual(
labels = c(
"No alert",
"Green alert",
"Yellow alert",
"Orange alert",
"Red alert",
"Extreme heavy rainfall"
),
values = c('White', 'Green', 'Yellow', 'Orange', 'Red', '#8B0000')
) +
labs(title = "Kerala weather warning",
subtitle = glue("Date: {col2}-{year(now())}"),
caption = "Source: IMD, Created by: Open-oven") +
theme_map()
girafe( ggobj = g1)
values <-  c('White', 'Green', 'Yellow', 'Orange', 'Red', '#8B0000')
g1 <- ggplot(map_latest) +
geom_sf(aes(fill = !!col2)) +
geom_sf_interactive(aes(fill = !!col2,tooltip = Name_1))+
scale_fill_manual(
labels = c(
"No alert",
"Green alert",
"Yellow alert",
"Orange alert",
"Red alert",
"Extreme heavy rainfall"
),
values) +
labs(title = "Kerala weather warning",
subtitle = glue("Date: {col2}-{year(now())}"),
caption = "Source: IMD, Created by: Open-oven") +
theme_void()
girafe( ggobj = g1)
library(tidyverse)
library(sf)
library(glue)
library(lubridate)
library(flexdashboard)
library(ggiraph)
# load data
source("warn.R", local = knitr::knit_global())
map_in <- st_read("./data/kerala/kerala_lak.shp")
weather_a  <- read_csv("./data/weather_warn.csv")
# re-code
weather_a[weather_a == "No rain"] <- "0"
weather_a[weather_a == "L." ] <- "1"
weather_a[weather_a == "L. to M" ] <- "1"
weather_a[weather_a == "L to M" ] <- "1"
weather_a[weather_a == "VL" ] <- "0"
weather_a[weather_a == "VL." ] <- "0"
weather_a[weather_a == "M" ] <- "2"
weather_a[weather_a == "M." ] <- "2"
weather_a[weather_a == "M. to H" ] <- "2"
weather_a[weather_a == "M to H" ] <- "2"
weather_a[weather_a == "H" ] <- "3"
weather_a[weather_a == "H." ] <- "3"
weather_a[weather_a == "VH" ] <- "4"
weather_a[weather_a == "VH." ] <- "4"
weather_a[weather_a == "XH" ] <- "5"
weather_a[weather_a == "XH." ] <- "5"
# col
colnames(weather_a)[1] <- "Name_1"
# shp + csv
map_latest <- merge(map_in,weather_a, by ="Name_1") %>%
filter(!grepl('Lakshadweep', Name_1))
# Col names
col2 <- sym(names(map_latest)[2])
col3 <- sym(names(map_latest)[3])
col4 <- sym(names(map_latest)[4])
col5 <- sym(names(map_latest)[5])
col6 <- sym(names(map_latest)[6])
g1 <- ggplot(map_latest) +
geom_sf(aes(fill = !!col2)) +
geom_sf_interactive(aes(fill = !!col2,tooltip = Name_1))+
scale_fill_manual(
labels = c(
"No alert",
"Green alert",
"Yellow alert",
"Orange alert",
"Red alert",
"Extreme heavy rainfall"
),
values = c('White', 'Green', 'Yellow', 'Orange', 'Red', '#8B0000')
) +
labs(title = "Kerala weather warning",
subtitle = glue("Date: {col2}-{year(now())}"),
caption = "Source: IMD, Created by: Open-oven") +
theme_map()
girafe( ggobj = g1)
g1 <- ggplot(map_latest) +
geom_sf(aes(fill = !!col2)) +
geom_sf_interactive(aes(fill = !!col2,tooltip = Name_1))+
scale_fill_manual(
labels = c(
"No alert",
"Green alert",
"Yellow alert",
"Orange alert",
"Red alert",
"Extreme heavy rainfall"
),
values = c('White', 'Green', 'Yellow', 'Orange', 'Red', '#8B0000')
) +
labs(title = "Kerala weather warning",
subtitle = glue("Date: {col2}-{year(now())}"),
caption = "Source: IMD, Created by: Open-oven") +
theme_void()
girafe( ggobj = g1)
library(tidyverse)
library(sf)
library(glue)
library(lubridate)
library(flexdashboard)
library(ggiraph)
# load data
source("warn.R", local = knitr::knit_global())
map_in <- st_read("./data/kerala/kerala_lak.shp")
weather_a  <- read_csv("./data/weather_warn.csv")
# re-code
weather_a[weather_a == "No rain"] <- "0"
weather_a[weather_a == "L." ] <- "1"
weather_a[weather_a == "L. to M" ] <- "1"
weather_a[weather_a == "L to M" ] <- "1"
weather_a[weather_a == "VL" ] <- "0"
weather_a[weather_a == "VL." ] <- "0"
weather_a[weather_a == "M" ] <- "2"
weather_a[weather_a == "M." ] <- "2"
weather_a[weather_a == "M. to H" ] <- "2"
weather_a[weather_a == "M to H" ] <- "2"
weather_a[weather_a == "H" ] <- "3"
weather_a[weather_a == "H." ] <- "3"
weather_a[weather_a == "VH" ] <- "4"
weather_a[weather_a == "VH." ] <- "4"
weather_a[weather_a == "XH" ] <- "5"
weather_a[weather_a == "XH." ] <- "5"
# col
colnames(weather_a)[1] <- "Name_1"
# shp + csv
map_latest <- merge(map_in,weather_a, by ="Name_1") %>%
filter(!grepl('Lakshadweep', Name_1))
# Col names
col2 <- sym(names(map_latest)[2])
col3 <- sym(names(map_latest)[3])
col4 <- sym(names(map_latest)[4])
col5 <- sym(names(map_latest)[5])
col6 <- sym(names(map_latest)[6])
# Plot Day 1
g1 <- ggplot(map_latest) +
geom_sf(aes(fill = !!col2)) +
geom_sf_interactive(aes(fill = !!col2,tooltip = Name_1))+
scale_fill_manual(
labels = c(
"No alert",
"Green alert",
"Yellow alert",
"Orange alert",
"Red alert",
"Extreme heavy rainfall"
),
values = c('White', 'Green', 'Yellow', 'Orange', 'Red', '#8B0000')
) +
labs(title = "Kerala weather warning",
subtitle = glue("Date: {col2}-{year(now())}"),
caption = "Source: IMD, Created by: Open-oven") +
theme_void()
girafe( ggobj = g1)
# Plot Day 2
g2 <- ggplot(map_latest) +
geom_sf(aes(fill = !!col3)) +
geom_sf_interactive(aes(fill = !!col3,tooltip = Name_1))+
scale_fill_manual(
labels = c(
"No alert",
"Green alert",
"Yellow alert",
"Orange alert",
"Red alert",
"Extreme heavy rainfall"
),
values = c('White', 'Green', 'Yellow', 'Orange', 'Red', '#8B0000')
) +
labs(title = "Kerala weather warning",
subtitle = glue("Date: {col3}-{year(now())}"),
caption = "Source: IMD, Created by: Open-oven") +
theme_void()
girafe( ggobj = g2)
# Plot Day 3
g3 <- ggplot(map_latest) +
geom_sf(aes(fill = !!col4)) +
geom_sf_interactive(aes(fill = !!col4,tooltip = Name_1))+
scale_fill_manual(
labels = c(
"No alert",
"Green alert",
"Yellow alert",
"Orange alert",
"Red alert",
"Extreme heavy rainfall"
),
values = c('White', 'Green', 'Yellow', 'Orange', 'Red', '#8B0000')
) +
labs(title = "Kerala weather warning",
subtitle = glue("Date: {col4}-{year(now())}"),
caption = "Source: IMD, Created by: Open-oven") +
theme_void()
girafe( ggobj = g3)
# Plot Day 4
g4 <- ggplot(map_latest) +
geom_sf(aes(fill = !!col5)) +
geom_sf_interactive(aes(fill = !!col5,tooltip = Name_1))+
scale_fill_manual(
labels = c(
"No alert",
"Green alert",
"Yellow alert",
"Orange alert",
"Red alert",
"Extreme heavy rainfall"
),
values = c('White', 'Green', 'Yellow', 'Orange', 'Red', '#8B0000')
) +
labs(title = "Kerala weather warning",
subtitle = glue("Date: {col5}-{year(now())}"),
caption = "Source: IMD, Created by: Open-oven") +
theme_void()
girafe( ggobj = g4)
# Plot Day 5
g5 <- ggplot(map_latest) +
geom_sf(aes(fill = !!col6)) +
geom_sf_interactive(aes(fill = !!col6,tooltip = Name_1))+
scale_fill_manual(
labels = c(
"No alert",
"Green alert",
"Yellow alert",
"Orange alert",
"Red alert",
"Extreme heavy rainfall"
),
values = c('White', 'Green', 'Yellow', 'Orange', 'Red', '#8B0000')
) +
labs(title = "Kerala weather warning",
subtitle = glue("Date: {col6}-{year(now())}"),
caption = "Source: IMD, Created by: Open-oven") +
theme_void()
girafe( ggobj = g5)
#ggiraph(code = {print(g5)}, zoom_max = 1, width = 10)
library(tidyverse)
library(sf)
library(glue)
library(lubridate)
library(flexdashboard)
library(ggiraph)
# load data
source("warn.R", local = knitr::knit_global())
map_in <- st_read("./data/kerala/kerala_lak.shp")
weather_a  <- read_csv("./data/weather_warn.csv")
# re-code
weather_a[weather_a == "No rain"] <- "0"
weather_a[weather_a == "L." ] <- "1"
weather_a[weather_a == "L. to M" ] <- "1"
weather_a[weather_a == "L to M" ] <- "1"
weather_a[weather_a == "VL" ] <- "0"
weather_a[weather_a == "VL." ] <- "0"
weather_a[weather_a == "M" ] <- "2"
weather_a[weather_a == "M." ] <- "2"
weather_a[weather_a == "M. to H" ] <- "2"
weather_a[weather_a == "M to H" ] <- "2"
weather_a[weather_a == "H" ] <- "3"
weather_a[weather_a == "H." ] <- "3"
weather_a[weather_a == "VH" ] <- "4"
weather_a[weather_a == "VH." ] <- "4"
weather_a[weather_a == "XH" ] <- "5"
weather_a[weather_a == "XH." ] <- "5"
# col
colnames(weather_a)[1] <- "Name_1"
# shp + csv
map_latest <- merge(map_in,weather_a, by ="Name_1") %>%
filter(!grepl('Lakshadweep', Name_1))
# Col names
col2 <- sym(names(map_latest)[2])
col3 <- sym(names(map_latest)[3])
col4 <- sym(names(map_latest)[4])
col5 <- sym(names(map_latest)[5])
col6 <- sym(names(map_latest)[6])
# Plot Day 1
g1 <- ggplot(map_latest) +
geom_sf(aes(fill = !!col2)) +
geom_sf_interactive(aes(fill = !!col2,tooltip = Name_1))+
scale_fill_manual(
labels = c(
"No alert",
"Green alert",
"Yellow alert",
"Orange alert",
"Red alert",
"Extreme heavy rainfall"
),
values = c('White', 'Green', 'Yellow', 'Orange', 'Red', '#8B0000')
) +
labs(title = "Kerala weather warning",
subtitle = glue("Date: {col2}-{year(now())}"),
caption = "Source: IMD, Created by: Open-oven") +
theme_void()
girafe( ggobj = g1)
# Plot Day 2
g2 <- ggplot(map_latest) +
geom_sf(aes(fill = !!col3)) +
geom_sf_interactive(aes(fill = !!col3,tooltip = Name_1))+
scale_fill_manual(
labels = c(
"No alert",
"Green alert",
"Yellow alert",
"Orange alert",
"Red alert",
"Extreme heavy rainfall"
),
values = c('White', 'Green', 'Yellow', 'Orange', 'Red', '#8B0000')
) +
labs(title = "Kerala weather warning",
subtitle = glue("Date: {col3}-{year(now())}"),
caption = "Source: IMD, Created by: Open-oven") +
theme_void()
girafe( ggobj = g2)
# Plot Day 3
g3 <- ggplot(map_latest) +
geom_sf(aes(fill = !!col4)) +
geom_sf_interactive(aes(fill = !!col4,tooltip = Name_1))+
scale_fill_manual(
labels = c(
"No alert",
"Green alert",
"Yellow alert",
"Orange alert",
"Red alert",
"Extreme heavy rainfall"
),
values = c('White', 'Green', 'Yellow', 'Orange', 'Red', '#8B0000')
) +
labs(title = "Kerala weather warning",
subtitle = glue("Date: {col4}-{year(now())}"),
caption = "Source: IMD, Created by: Open-oven") +
theme_void()
girafe( ggobj = g3)
# Plot Day 4
g4 <- ggplot(map_latest) +
geom_sf(aes(fill = !!col5)) +
geom_sf_interactive(aes(fill = !!col5,tooltip = Name_1))+
scale_fill_manual(
labels = c(
"No alert",
"Green alert",
"Yellow alert",
"Orange alert",
"Red alert",
"Extreme heavy rainfall"
),
values = c('White', 'Green', 'Yellow', 'Orange', 'Red', '#8B0000')
) +
labs(title = "Kerala weather warning",
subtitle = glue("Date: {col5}-{year(now())}"),
caption = "Source: IMD, Created by: Open-oven") +
theme_void()
girafe( ggobj = g4)
# Plot Day 5
g5 <- ggplot(map_latest) +
geom_sf(aes(fill = !!col6)) +
geom_sf_interactive(aes(fill = !!col6,tooltip = Name_1))+
scale_fill_manual(
labels = c(
"No alert",
"Green alert",
"Yellow alert",
"Orange alert",
"Red alert",
"Extreme heavy rainfall"
),
values = c('White', 'Green', 'Yellow', 'Orange', 'Red', '#8B0000')
) +
labs(title = "Kerala weather warning",
subtitle = glue("Date: {col6}-{year(now())}"),
caption = "Source: IMD, Created by: Open-oven") +
theme_void()
girafe( ggobj = g5)
#ggiraph(code = {print(g5)}, zoom_max = 1, width = 10)
library(flexdashboard)
library(tidyverse)
Diesel <- read.csv("https://open-oven.github.io/India-Fuel-Price-Updater/data/Diesel.csv")
Petrol <- read.csv("https://open-oven.github.io/India-Fuel-Price-Updater/data/Petrol.csv")
petrol_latest <- slice(Petrol, 1L)
diesel_latest <- slice(Diesel, 1L)
valueBox(petrol_latest$Delhi,icon = "fa-gas-pump")
valueBox(diesel_latest$Delhi,icon = "fa-gas-pump",color = "success")
Petrol$Date <- as.Date(Petrol$Date)
Pd <- ggplot(Petrol, aes(x = Date, y = Delhi)) +            # Draw ggplot2 plot
geom_area( fill="#69b3a2", alpha=0.4) +
geom_line(color="#69b3a2", size=2) +
ylab("Price")+
ggtitle("Surging Petrol price in Delhi")+
scale_x_date(date_labels = "%Y-%m")+
theme_minimal()
Pd
Diesel$Date <- as.Date(Diesel$Date)
Dd <- ggplot(Diesel, aes(x = Date, y = Delhi)) +            # Draw ggplot2 plot
geom_area( fill="#FFA500", alpha=0.4) +
geom_line(color="#FFA500", size=2) +
ylab("Price")+
ggtitle("Surging Diesel price in Delhi")+
scale_x_date(date_labels = "%Y-%m")+
theme_minimal()
Dd
valueBox(petrol_latest$Mumbai,icon = "fa-gas-pump")
valueBox(diesel_latest$Mumbai,icon = "fa-gas-pump",color = "success")
Petrol$Date <- as.Date(Petrol$Date)
Mp <- ggplot(Petrol, aes(x = Date, y = Mumbai)) +            # Draw ggplot2 plot
geom_area( fill="#69b3a2", alpha=0.4) +
geom_line(color="#69b3a2", size=2) +
ylab("Price")+
ggtitle("Surging Petrol price in Mumbai")+
scale_x_date(date_labels = "%Y-%m")+
theme_minimal()
Mp
Diesel$Date <- as.Date(Diesel$Date)
Md <- ggplot(Diesel, aes(x = Date, y = Mumbai)) +            # Draw ggplot2 plot
geom_area( fill="#FFA500", alpha=0.4) +
geom_line(color="#FFA500", size=2) +
ylab("Price")+
ggtitle("Surging Diesel price in Mumbai")+
scale_x_date(date_labels = "%Y-%m")+
theme_minimal()
Md
valueBox(petrol_latest$Chennai,icon = "fa-gas-pump")
valueBox(diesel_latest$Chennai,icon = "fa-gas-pump",color = "success")
Petrol$Date <- as.Date(Petrol$Date)
Cp <- ggplot(Petrol, aes(x = Date, y = Chennai)) +            # Draw ggplot2 plot
geom_area( fill="#69b3a2", alpha=0.4) +
geom_line(color="#69b3a2", size=2) +
ylab("Price")+
ggtitle("Surging Petrol price in Chennai")+
scale_x_date(date_labels = "%Y-%m")+
theme_minimal()
Cp
Diesel$Date <- as.Date(Diesel$Date)
Cd <- ggplot(Diesel, aes(x = Date, y = Chennai)) +            # Draw ggplot2 plot
geom_area( fill="#FFA500", alpha=0.4) +
geom_line(color="#FFA500", size=2) +
ylab("Price")+
ggtitle("Surging Diesel price in Chennai")+
scale_x_date(date_labels = "%Y-%m")+
theme_minimal()
Cd
valueBox(petrol_latest$Kolkata,icon = "fa-gas-pump")
valueBox(diesel_latest$Kolkata,icon = "fa-gas-pump",color = "success")
Petrol$Date <- as.Date(Petrol$Date)
Kp <- ggplot(Petrol, aes(x = Date, y = Kolkata)) +            # Draw ggplot2 plot
geom_area( fill="#69b3a2", alpha=0.4) +
geom_line(color="#69b3a2", size=2) +
ylab("Price")+
ggtitle("Surging Petrol price in Kolkata")+
scale_x_date(date_labels = "%Y-%m")+
theme_minimal()
Kp
Diesel$Date <- as.Date(Diesel$Date)
Kd <- ggplot(Diesel, aes(x = Date, y = Kolkata)) +            # Draw ggplot2 plot
geom_area( fill="#FFA500", alpha=0.4) +
geom_line(color="#FFA500", size=2) +
ylab("Price")+
ggtitle("Surging Diesel price in Kolkata")+
scale_x_date(date_labels = "%Y-%m")+
theme_minimal()
Kd
